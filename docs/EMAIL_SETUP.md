# üìß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ Email

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å `lib/email/send.ts`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- ‚úÖ **DEV —Ä–µ–∂–∏–º** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∏—Å–µ–º –≤ –∫–æ–Ω—Å–æ–ª—å (—Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏)
- ‚úÖ **Resend** - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- ‚úÖ **Mailtrap** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- ‚úÖ **–Ø–Ω–¥–µ–∫—Å.SMTP** - –¥–ª—è –¥–æ–º–µ–Ω–Ω–æ–π –ø–æ—á—Ç—ã

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (DEV)

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–∏—Å—å–º–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å** - –Ω–∏—á–µ–≥–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ!

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è:
```bash
üìß =============== EMAIL (DEV MODE) ===============
To: user@example.com
Subject: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è - ZumZam
HTML: <html>...</html>
====================================================
```

–ü—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π (Mailtrap)

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [mailtrap.io](https://mailtrap.io)
2. –°–æ–∑–¥–∞–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
3. –°–æ–∑–¥–∞–π—Ç–µ inbox
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ credentials

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env.local
```bash
EMAIL_PROVIDER="mailtrap"
MAILTRAP_USER="–≤–∞—à-user-–∏–∑-mailtrap"
MAILTRAP_PASS="–≤–∞—à-pass-–∏–∑-mailtrap"
EMAIL_FROM="ZumZam <noreply@zumzam.ru>"
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install nodemailer
npm install -D @types/nodemailer
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–¢–µ–ø–µ—Ä—å –≤—Å–µ –ø–∏—Å—å–º–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å—Å—è Mailtrap - –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –∏—Ö –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–∏—Å—å–º–∞ –Ω–µ —É—Ö–æ–¥—è—Ç —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ë—Ä—Å—Ç–∫—É
- ‚úÖ –í–∏–¥–Ω–æ –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## üéØ –ü—Ä–æ–¥–∞–∫—à–µ–Ω (Resend) - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [resend.com](https://resend.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç
3. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å `noreply@zumzam.ru`:
1. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω –≤ Resend
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS –∑–∞–ø–∏—Å–∏ (SPF, DKIM, DMARC)
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

–ï—Å–ª–∏ –¥–æ–º–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω - –ø–∏—Å—å–º–∞ –±—É–¥—É—Ç —Å `onboarding@resend.dev` (–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±—É–¥—É—Ç).

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env
```bash
EMAIL_PROVIDER="resend"
RESEND_API_KEY="re_–≤–∞—à_api_–∫–ª—é—á"
EMAIL_FROM="ZumZam <noreply@zumzam.ru>"
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install resend
```

### 5. –ì–æ—Ç–æ–≤–æ!
–ü–∏—Å—å–º–∞ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω–æ.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ 3000 –ø–∏—Å–µ–º/–º–µ—Å—è—Ü
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å localhost
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π API
- ‚úÖ Dashboard —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç—å

---

## üìÆ –Ø–Ω–¥–µ–∫—Å.–ü–æ—á—Ç–∞ –¥–ª—è –¥–æ–º–µ–Ω–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ø–Ω–¥–µ–∫—Å.–ü–æ—á—Ç—ã
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –¥–æ–º–µ–Ω –∫ [–Ø–Ω–¥–µ–∫—Å.–ü–æ—á—Ç–µ –¥–ª—è –¥–æ–º–µ–Ω–∞](https://connect.yandex.ru)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ—á—Ç–æ–≤—ã–π —è—â–∏–∫ `noreply@zumzam.ru`
3. –í–∫–ª—é—á–∏—Ç–µ IMAP/SMTP –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
4. –°–æ–∑–¥–∞–π—Ç–µ **–ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** (–Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä–æ–ª—å!)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env
```bash
EMAIL_PROVIDER="yandex"
YANDEX_EMAIL="noreply@zumzam.ru"
YANDEX_APP_PASSWORD="–≤–∞—à-–ø–∞—Ä–æ–ª—å-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
EMAIL_FROM="ZumZam <noreply@zumzam.ru>"
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install nodemailer
npm install -D @types/nodemailer
```

### 4. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
‚ö†Ô∏è **–Ø–Ω–¥–µ–∫—Å –ª–∏–º–∏—Ç—ã:**
- ~500 –ø–∏—Å–µ–º –≤ –¥–µ–Ω—å —Å –æ–¥–Ω–æ–≥–æ —è—â–∏–∫–∞
- –ú–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏
- –ù—É–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ø–Ω–¥–µ–∫—Å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –¥–æ–º–µ–Ω–Ω–∞—è –ø–æ—á—Ç–∞. –î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –ª—É—á—à–µ Resend.

---

## üîß –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ DEV

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
# .env.local
EMAIL_PROVIDER="resend"  # –∏–ª–∏ mailtrap
RESEND_API_KEY="re_..."
FORCE_EMAIL_SEND=true    # –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–∂–µ –≤ DEV —Ä–µ–∂–∏–º–µ
```

---

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –ø–∏—Å–µ–º

–û—Ç–∫—Ä–æ–π—Ç–µ `lib/email/send.ts` –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é:

```typescript
export async function sendOrderConfirmation(
  email: string, 
  orderNumber: string
) {
  return sendEmail({
    to: email,
    subject: `–ó–∞–∫–∞–∑ #${orderNumber} –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω`,
    html: `
      <h1>–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!</h1>
      <p>–í–∞—à –∑–∞–∫–∞–∑ #${orderNumber} –ø—Ä–∏–Ω—è—Ç –≤ —Ä–∞–±–æ—Ç—É.</p>
    `,
    text: `–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑! –í–∞—à –∑–∞–∫–∞–∑ #${orderNumber} –ø—Ä–∏–Ω—è—Ç –≤ —Ä–∞–±–æ—Ç—É.`
  })
}
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ API:
```typescript
import { sendOrderConfirmation } from '@/lib/email/send'

await sendOrderConfirmation('user@example.com', 'ORD-123')
```

---

## üé® –®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º

–í—Å–µ –ø–∏—Å—å–º–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç HTML —Å inline —Å—Ç–∏–ª—è–º–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –ø–æ—á—Ç–æ–≤—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏.

**–ë–∞–∑–æ–≤—ã–π —Å—Ç–∏–ª—å:**
- –®—Ä–∏—Ñ—Ç: system fonts (Arial, sans-serif)
- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç: `#F97316` (orange-500)
- –ö–Ω–æ–ø–∫–∏: `border-radius: 24px`
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞: 600px

**–ü—Ä–∏–º–µ—Ä –∫–Ω–æ–ø–∫–∏:**
```html
<a href="..." style="
  display: inline-block;
  padding: 12px 24px;
  background: #F97316;
  color: white;
  text-decoration: none;
  border-radius: 24px;
  font-weight: 600;
">–ù–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å</a>
```

---

## ‚ùì FAQ

### –ü–æ—á–µ–º—É –ø–∏—Å—å–º–∞ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ DEV?
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `EMAIL_PROVIDER` –≤ `.env.local` –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏.

### –ú–æ–∂–Ω–æ –ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ø–Ω–¥–µ–∫—Å.–ü–æ—á—Ç—É –ª–æ–∫–∞–ª—å–Ω–æ?
–î–∞! –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `YANDEX_EMAIL` –∏ `YANDEX_APP_PASSWORD` - –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å localhost.

### –ß—Ç–æ –ª—É—á—à–µ: Resend –∏–ª–∏ –Ø–Ω–¥–µ–∫—Å?
- **Resend** - –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ—Å—Ç–æ—Ç–∞
- **–Ø–Ω–¥–µ–∫—Å** - –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –¥–æ–º–µ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ –∏ –Ω–µ–±–æ–ª—å—à–æ–π –æ–±—ä—ë–º –ø–∏—Å–µ–º

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å HTML –ø–∏—Å—å–º–∞?
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Mailtrap - —Ç–∞–º –µ—Å—Ç—å –ø—Ä–µ–≤—å—é –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ—á—Ç–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.

### –ù—É–∂–Ω–æ –ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å SPF/DKIM?
- **Resend** - –Ω–∞—Å—Ç—Ä–æ–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–Ø–Ω–¥–µ–∫—Å** - —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è –¥–æ–º–µ–Ω–∞
- **Mailtrap** - –Ω–µ –Ω—É–∂–Ω–æ (—Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å)

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Resend Documentation](https://resend.com/docs)
- [Mailtrap](https://mailtrap.io)
- [Nodemailer](https://nodemailer.com)
- [–Ø–Ω–¥–µ–∫—Å.–ü–æ—á—Ç–∞ –¥–ª—è –¥–æ–º–µ–Ω–∞](https://connect.yandex.ru)
- [Email HTML Best Practices](https://www.campaignmonitor.com/css/)



