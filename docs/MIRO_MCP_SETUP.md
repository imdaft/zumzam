# Настройка MCP Miro для визуализации дерева профилей

## Что это дает?

После настройки MCP Miro вы сможете:
- Создавать доски Miro прямо из Cursor
- Визуализировать сложные структуры данных (например, наше дерево профилей)
- Создавать диаграммы, схемы, ментальные карты
- Совместно работать над визуализацией с командой

## Шаг 1: Получение Miro Access Token

1. Перейдите на [Miro Developer Portal](https://developers.miro.com/)
2. Войдите в свой аккаунт Miro (или создайте новый)
3. Перейдите в **"My apps"** или создайте новое приложение
4. Создайте новое приложение или используйте существующее
5. В настройках приложения установите следующие разрешения:

| Permission        | Требуется |
| ----------------- | --------- |
| boards:read       | ✅        |
| boards:write      | ✅        |
| identity:read     | ✅        |
| identity:write    | ✅        |
| team:read         | ✅        |
| team:write        | ✅        |

6. В разделе **"Install app and get OAuth token"** нажмите **"Get OAuth token"**
7. Скопируйте полученный токен (сохраните его в безопасном месте)

## Шаг 2: Настройка MCP в Cursor

### Для Windows:

1. Откройте файл конфигурации Cursor:
   ```
   %APPDATA%\Cursor\User\globalStorage\mcp.json
   ```
   
   Или создайте файл, если его нет:
   - Путь: `C:\Users\ВАШ_ПОЛЬЗОВАТЕЛЬ\AppData\Roaming\Cursor\User\globalStorage\mcp.json`

2. Добавьте конфигурацию MCP Miro:

```json
{
  "mcpServers": {
    "miro": {
      "command": "npx",
      "args": [
        "-y",
        "@k-jarzyna/mcp-miro"
      ],
      "env": {
        "MIRO_ACCESS_TOKEN": "ВАШ_MIRO_ACCESS_TOKEN_ЗДЕСЬ"
      }
    }
  }
}
```

3. Замените `ВАШ_MIRO_ACCESS_TOKEN_ЗДЕСЬ` на токен, полученный в шаге 1

4. Сохраните файл

5. **Перезапустите Cursor** (полностью закройте и откройте заново)

### Для macOS:

1. Откройте файл:
   ```
   ~/Library/Application Support/Cursor/User/globalStorage/mcp.json
   ```

2. Добавьте ту же конфигурацию, что и выше

3. Перезапустите Cursor

## Шаг 3: Проверка подключения

После перезапуска Cursor, MCP инструменты Miro должны быть доступны. 

Вы можете проверить, попросив AI:
- "Покажи доступные MCP ресурсы"
- "Создай доску Miro с названием 'Тест'"

## Шаг 4: Визуализация дерева профилей в Miro

После успешной настройки, мы можем создать визуальную диаграмму нашего дерева создания профилей в Miro:

1. **Создать новую доску** для дерева профилей
2. **Добавить основные блоки** для каждой категории
3. **Создать связи** между категориями и подтипами
4. **Добавить детальные блоки** с характеристиками
5. **Использовать цвета и иконки** для лучшей визуализации

## Пример использования

После настройки вы сможете попросить:

```
Создай доску Miro с визуализацией дерева создания профилей:
- Основные категории: Площадка, Аниматор, Шоу, Агентство, Квест, Мастер-класс, Фото/Видео
- Подтипы для каждой категории
- Блоки характеристик для каждого подтипа
- Связи между элементами
```

## Доступные инструменты MCP Miro

После подключения будут доступны инструменты для:

- ✅ Создания и управления досками
- ✅ Добавления элементов (карточки, заметки, фигуры)
- ✅ Создания связей между элементами
- ✅ Добавления текста и изображений
- ✅ Создания групп элементов
- ✅ Экспорта досок

## Устранение проблем

### MCP инструменты не появляются

1. Проверьте, что файл конфигурации находится в правильном месте
2. Убедитесь, что JSON валидный (можно проверить на jsonlint.com)
3. Полностью перезапустите Cursor
4. Проверьте, что токен Miro правильный и не истек

### Ошибка доступа к Miro

1. Проверьте, что токен актуален
2. Убедитесь, что у приложения есть все необходимые разрешения
3. Проверьте, что токен не был отозван в Miro Developer Portal

### Инструменты появляются, но не работают

1. Проверьте логи Cursor (View → Output → MCP)
2. Убедитесь, что у вас есть активный интернет
3. Проверьте, что Miro API доступен

## Альтернатива: Ручная визуализация

Если настройка MCP вызывает проблемы, вы можете:

1. Экспортировать структуру дерева в формате Markdown (уже создано в `docs/profile-wizard-tree.md`)
2. Импортировать в Miro вручную
3. Использовать шаблоны Miro для создания диаграмм

## Следующие шаги

После настройки MCP Miro:

1. Создадим визуальную диаграмму дерева профилей
2. Добавим интерактивные элементы
3. Создадим шаблоны для каждого типа профиля
4. Настроим совместную работу над визуализацией

---

**Примечание**: Настройка MCP требует доступа к файловой системе Cursor. Если у вас нет прав доступа, обратитесь к администратору системы или используйте альтернативные способы визуализации.

