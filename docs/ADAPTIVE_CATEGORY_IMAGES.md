# –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π

## –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–î–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ "–£—Å–ª—É–≥–∏ –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞" –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å **–¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∫—Ä–æ–ø–∞**:
- **Desktop**: 16:9 (—à–∏—Ä–æ–∫–∏–π —Ñ–æ—Ä–º–∞—Ç)
- **Mobile**: 1:1 (–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```sql
-- –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –º–∏–≥—Ä–∞—Ü–∏–∏ 20251213000000_add_responsive_crops_to_category_images.sql
ALTER TABLE category_images 
ADD COLUMN desktop_crop JSONB,
ADD COLUMN mobile_crop JSONB;

-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSONB:
{
  "x": 0,          -- –°–º–µ—â–µ–Ω–∏–µ –ø–æ X –≤ –ø–∏–∫—Å–µ–ª—è—Ö
  "y": 0,          -- –°–º–µ—â–µ–Ω–∏–µ –ø–æ Y –≤ –ø–∏–∫—Å–µ–ª—è—Ö
  "width": 100,    -- –®–∏—Ä–∏–Ω–∞ crop-–æ–±–ª–∞—Å—Ç–∏ –≤ %
  "height": 100,   -- –í—ã—Å–æ—Ç–∞ crop-–æ–±–ª–∞—Å—Ç–∏ –≤ %
  "zoom": 1,       -- –£—Ä–æ–≤–µ–Ω—å –∑—É–º–∞ (1-3)
  "rotation": 0    -- –ü–æ–≤–æ—Ä–æ—Ç –≤ –≥—Ä–∞–¥—É—Å–∞—Ö (0-360)
}
```

### 2. API Endpoints

#### GET /api/category-images
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "images": {
    "venues": "url",
    "animators": "url"
  },
  "crops": {
    "venues": {
      "desktop": { "x": 0, "y": 0, "width": 100, "height": 100, "zoom": 1, "rotation": 0 },
      "mobile": { "x": 0, "y": 0, "width": 100, "height": 100, "zoom": 1, "rotation": 0 }
    }
  }
}
```

#### POST /api/category-images
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç:
```json
{
  "categoryId": "venues",
  "imageUrl": "https://...",
  "desktopCrop": { ... },
  "mobileCrop": { ... }
}
```

### 3. UI Components

#### CategoryCard
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫—Ä–æ–ø –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç breakpoint
- –ö–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞

#### Crop Editor Dialog
1. –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞: Desktop (16:9) / Mobile (1:1)
2. –ü—Ä–µ–≤—å—é –æ–±–æ–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä—è–¥–æ–º
3. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –æ—Ç–¥–µ–ª—å–Ω–æ
4. –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–∞"

### 4. Workflow

1. **–ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**:
   - –ê–¥–º–∏–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–≤–∞ –∫—Ä–æ–ø–∞ (–ø–æ —Ü–µ–Ω—Ç—Ä—É)
   - Desktop: object-fit cover –¥–ª—è 16:9
   - Mobile: object-fit cover –¥–ª—è 1:1

2. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –ê–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
   - –í–∏–¥–∏—Ç –ø—Ä–µ–≤—å—é –æ–±–æ–∏—Ö –∫—Ä–æ–ø–æ–≤
   - –í—ã–±–∏—Ä–∞–µ—Ç "Desktop" –∏–ª–∏ "Mobile"
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∫—Ä–æ–ø –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ (zoom, position, rotation)
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫—Ä–æ–ø

3. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**:
   - –ù–∞ desktop: –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è desktopCrop (16:9)
   - –ù–∞ mobile: –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è mobileCrop (1:1)
   - CSS: `object-position` –∏ `transform` –Ω–∞ –æ—Å–Ω–æ–≤–µ crop-–¥–∞–Ω–Ω—ã—Ö

## –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –≠—Ç–∞–ø 1: –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
- [x] –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è —Å –ø–æ–ª—è–º–∏ desktop_crop –∏ mobile_crop

### üîÑ –≠—Ç–∞–ø 2: API
- [ ] –û–±–Ω–æ–≤–∏—Ç—å GET /api/category-images –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫—Ä–æ–ø–æ–≤
- [ ] –û–±–Ω–æ–≤–∏—Ç—å POST /api/category-images –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—Ä–æ–ø–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é crop-–¥–∞–Ω–Ω—ã—Ö

### üîÑ –≠—Ç–∞–ø 3: UI Components
- [ ] –î–æ–±–∞–≤–∏—Ç—å ResponsiveCropEditor –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–≤—å—é desktop/mobile –≤ –æ–¥–∏–Ω —ç–∫—Ä–∞–Ω
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å CategoryCard

### ‚è≥ –≠—Ç–∞–ø 4: –†–µ–Ω–¥–µ—Ä–∏–Ω–≥
- [ ] –ü—Ä–∏–º–µ–Ω—è—Ç—å crop-–¥–∞–Ω–Ω—ã–µ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é —á–µ—Ä–µ–∑ CSS transform
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ desktop/mobile –∫—Ä–æ–ø–∞

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è crop-–¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ crop —á–µ—Ä–µ–∑ CSS
```tsx
<div style={{
  position: 'relative',
  width: '100%',
  aspectRatio: isDesktop ? '16/9' : '1/1',
  overflow: 'hidden'
}}>
  <img
    src={imageUrl}
    style={{
      width: `${100 / crop.zoom}%`,
      height: `${100 / crop.zoom}%`,
      objectFit: 'cover',
      objectPosition: `${crop.x}% ${crop.y}%`,
      transform: `rotate(${crop.rotation}deg)`
    }}
  />
</div>
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

### –í–∞—Ä–∏–∞–Ω—Ç A: –î–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞ (–æ—Ç–∫–ª–æ–Ω—ë–Ω)
- –ü–ª—é—Å: –ü—Ä–æ—â–µ —Ä–µ–Ω–¥–µ—Ä
- –ú–∏–Ω—É—Å: –î–≤–æ–π–Ω–æ–π storage, —Å–ª–æ–∂–Ω–µ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç B: Crop-–¥–∞–Ω–Ω—ã–µ –≤ JSON (–≤—ã–±—Ä–∞–Ω) ‚úÖ
- –ü–ª—é—Å: –û–¥–∏–Ω —Ñ–∞–π–ª, –≥–∏–±–∫–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ú–∏–Ω—É—Å: –°–ª–æ–∂–Ω–µ–µ —Ä–µ–Ω–¥–µ—Ä, –Ω—É–∂–Ω–∞ CSS-–º–∞–≥–∏—è









