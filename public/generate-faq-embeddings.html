<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è FAQ Embeddings</title>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; }
    button { padding: 12px 24px; font-size: 16px; cursor: pointer; background: #7c3aed; color: white; border: none; border-radius: 8px; }
    button:hover { background: #6d28d9; }
    button:disabled { background: #9ca3af; cursor: wait; }
    #status { margin-top: 20px; padding: 16px; background: #f3f4f6; border-radius: 8px; }
    #results { margin-top: 20px; white-space: pre-wrap; font-family: monospace; background: #1f2937; color: #10b981; padding: 16px; border-radius: 8px; }
    .success { color: #10b981; }
    .error { color: #ef4444; }
  </style>
</head>
<body>
  <h1>üß† –ì–µ–Ω–µ—Ä–∞—Ü–∏—è FAQ Embeddings</h1>
  <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ embeddings –¥–ª—è FAQ –≤–æ–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ Gemini API.</p>
  
  <button id="checkBtn" onclick="checkStatus()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
  <button id="generateBtn" onclick="generateEmbeddings()">üöÄ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å embeddings</button>
  
  <div id="status">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞...</div>
  <div id="results"></div>

  <script>
    async function checkStatus() {
      const statusEl = document.getElementById('status');
      statusEl.innerHTML = '–ü—Ä–æ–≤–µ—Ä—è—é...';
      
      try {
        const res = await fetch('/api/faq/generate-embeddings');
        const data = await res.json();
        
        statusEl.innerHTML = `
          <strong>–°—Ç–∞—Ç—É—Å FAQ Embeddings:</strong><br>
          ‚Ä¢ –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: ${data.total}<br>
          ‚Ä¢ –° embeddings: ${data.withEmbeddings}<br>
          ‚Ä¢ –ë–µ–∑ embeddings: ${data.withoutEmbeddings}<br>
          ‚Ä¢ –ì–æ—Ç–æ–≤–æ –∫ AI-–ø–æ–∏—Å–∫—É: ${data.ready ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç'}
        `;
      } catch (err) {
        statusEl.innerHTML = '<span class="error">–û—à–∏–±–∫–∞: ' + err.message + '</span>';
      }
    }

    async function generateEmbeddings() {
      const btn = document.getElementById('generateBtn');
      const resultsEl = document.getElementById('results');
      
      btn.disabled = true;
      btn.textContent = '‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è...';
      resultsEl.innerHTML = '–ó–∞–ø—É—Å–∫–∞—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é embeddings —á–µ—Ä–µ–∑ Gemini API...\n–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥...';
      
      try {
        const res = await fetch('/api/faq/generate-embeddings', {
          method: 'POST'
        });
        const data = await res.json();
        
        resultsEl.innerHTML = JSON.stringify(data, null, 2);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
        await checkStatus();
      } catch (err) {
        resultsEl.innerHTML = '<span class="error">–û—à–∏–±–∫–∞: ' + err.message + '</span>';
      } finally {
        btn.disabled = false;
        btn.textContent = 'üöÄ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å embeddings';
      }
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    checkStatus();
  </script>
</body>
</html>

